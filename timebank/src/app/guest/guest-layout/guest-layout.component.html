<div class="main">
  <div class="flex-container">
    <!-- <mat-checkbox class="example-margin" (click)="refresh(checked)" [(ngModel)]="checked">Ratting sort</mat-checkbox> -->
    <mat-slide-toggle
      class="example-margin"
      (click)="refresh(checked)"
      [(ngModel)]="checked"
      style="color: #d6d3d1"
      >Sort by rating</mat-slide-toggle
    >
    <form class="example-form">
      <mat-form-field class="example-full-width" style="padding: 1rem">
        <span matPrefix> </span>
        <input
          type="tel"
          matInput
          style="color: #d6d3d1 !important"
          name="search"
          [(ngModel)]="search"
        />
        <button matSuffix mat-button style="color: #d6d3d1 !important">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
      <br />
      {{ search }}
    </form>
  </div>

  <div class="cardsWrap">
    <div *ngFor="let service of services" style="white-space: normal">
      <mat-card class="card">
        <mat-card-title style="overflow: hidden">{{
          service.title
        }}</mat-card-title>
        <mat-divider inset></mat-divider>
        <br />
        <mat-card-content>
          <p>
            Name:
            <a
              routerLink="/user-service/{{ service.user_id }}"
              class="clickable"
              ><b>{{ service.user }}</b></a
            >
          </p>
          <p>
            Phone: <b>{{ service.phone }}</b>
          </p>

          <div *ngIf="service.estimate != null; else estimateIsNull">
            <p *ngIf="service.estimate != 0; else estimateIsZero">
              Estimate time for this service
              <span *ngIf="service.estimate == 1; else elseAre">is</span>
              <ng-template #elseAre>are</ng-template> {{ service.estimate }}
              <span *ngIf="service.estimate == 1; else elseHours">hour.</span>
              <ng-template #elseHours>hours.</ng-template>
            </p>
            <ng-template #estimateIsZero
              ><p>Estimate time is not available.</p></ng-template
            >
          </div>
          <ng-template #estimateIsNull>
            <p>Estimate time is not available.</p>
          </ng-template>

          <div class="starratting">
            <star-rating
              [value]="service.avg_rating"
              [totalstars]="5"
              checkedcolor="red"
              uncheckedcolor="black"
              size="18px"
              [readonly]="true"
            ></star-rating>
          </div>
          <mat-card-actions style="display: flex; justify-content: flex-end">
            <button
              mat-raised-button
              style="background-color:#0382c7 ; color: #d6d3d1;"
              routerLink="/order/{{ service.id }}"
            >
              <mat-icon>shopping_cart </mat-icon>
              <span> Order </span>
            </button>
          </mat-card-actions>
        </mat-card-content>
        <!-- <mat-divider inset></mat-divider> -->
      </mat-card>
    </div>
  </div>
</div>
