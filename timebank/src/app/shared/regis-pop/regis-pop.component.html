<mat-toolbar color="primary">
  <span class="fill-remaining-space"> Sign Up </span>
</mat-toolbar>

<div class="container" *ngIf="!post; else forminfo">
  <form
    [formGroup]="formGroup"
    (ngSubmit)="onSubmit(formGroup.value)"
    class="form"
    novalidate
  >
    <mat-form-field class="form-element">
      <input matInput placeholder="Name" formControlName="name" />
      <mat-error *ngIf="!name.valid && name.touched">
        {{ titleAlert }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill" class="form-element">
      <mat-label>Phone number</mat-label>
      <app-pho class="inputC" formControlName="myphone" required #tel></app-pho>
      <mat-icon matSuffix style="margin-left: 1.4rem">phone</mat-icon>
      <mat-hint *ngIf="!formGroup.get('myphone')?.hasError('alreadyTaken')"
        >Include country code</mat-hint
      >
      <mat-error *ngIf="!formGroup.controls['password_valid'].valid">
        {{ getErrorPhone() }}
      </mat-error>

      <mat-hint
        *ngIf="formGroup.get('myphone')?.hasError('alreadyTaken')"
        style="color: red !important; font-size: x-small"
      >
        Phone number is already in use
      </mat-hint>

      <mat-error *ngIf="tel.errorState" style="text-align: left"
        >Wrong format +XXX 444 556677
      </mat-error>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Password"
        type="password"
        formControlName="password"
      />
      <mat-hint
        >Choose a password of at least eight characters, one uppercase letter
        and one number</mat-hint
      >
      <mat-error
        *ngIf="
          !formGroup.controls['password'].valid &&
          formGroup.controls['password'].touched
        "
      >
        {{ getErrorPassword() }}
      </mat-error>
    </mat-form-field>

    <mat-form-field class="form-element">
      <input
        matInput
        placeholder="Password"
        type="password"
        formControlName="password_valid"
      />
      <mat-hint
        >Choose a password of at least eight characters, one uppercase letter
        and one number</mat-hint
      >
      <mat-error
        *ngIf="
          !formGroup.controls['password_valid'].valid &&
          formGroup.controls['password_valid'].touched
        "
      >
        {{ getErrorPassword() }}
      </mat-error>
    </mat-form-field>

    <div class="form-element">
      <button
        mat-raised-button
        color="primary"
        type="submit"
        class="button"
        [disabled]="!formGroup.valid"
      >
        Sign up
      </button>
    </div>
  </form>
</div>

<ng-template #forminfo>
  <div class="container">
    {{ post | json }}
  </div>
</ng-template>
